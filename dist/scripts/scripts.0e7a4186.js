"use strict";angular.module("gridpoolsApp",["ngAnimate","ngCookies","ngMessages","ngResource","ngSanitize","ngTouch","ngMaterial","ui.router","ui.bootstrap","akoenig.deckgrid","firebase","angularFileUpload","base64"]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/"),a.state("home",{url:"/",templateUrl:"views/landing.html",controller:"LandingController",module:"public"}).state("dashboard",{url:"/dashboard",templateUrl:"views/dashboard.html",controller:"DashboardController",module:"private"}).state("dashboard.grid",{url:"/",templateUrl:"views/grid.html",controller:"GridController"}).state("dashboard.profile",{url:"/",templateUrl:"views/profile.html",controller:"ProfileController"})}]).run(["Profile","$rootScope","$state","$cookies",function(a,b,c,d){a.requestUser().then(function(){a.getData().then(function(){c.go("dashboard")})},function(){c.go("home")}),b.$on("$stateChangeStart",function(a,b){"private"!==b.module||d.gridpools?"public"===b.module&&d.gridpools&&(a.preventDefault(),c.go("dashboard")):(a.preventDefault(),c.go("home"))})}]),angular.module("gridpoolsApp").controller("LandingController",["$scope","$state","Create","$modal",function(a,b,c,d){a.openModal=function(){var b=d.open({templateUrl:"views/login.html",controller:"LoginController"});b.result.then(function(b){a.selected=b})},a.creds={},a.play=function(a){c.createUser(a).then(function(){c.createGrid(a),b.go("dashboard")},function(a){console.log(a)})}}]),angular.module("gridpoolsApp").controller("GridController",["$scope","$modal",function(a,b){a.squares=[{sq:"0 & 0"},{sq:"0 & 1"},{sq:"0 & 2"},{sq:"0 & 3"},{sq:"0 & 4"},{sq:"0 & 5"},{sq:"0 & 6"},{sq:"0 & 7"},{sq:"0 & 8"},{sq:"0 & 9"},{sq:"1 & 0"},{sq:"1 & 1"},{sq:"1 & 2"},{sq:"1 & 3"},{sq:"1 & 4"},{sq:"1 & 5"},{sq:"1 & 6"},{sq:"1 & 7"},{sq:"1 & 8"},{sq:"1 & 9"},{sq:"2 & 0"},{sq:"2 & 1"},{sq:"2 & 2"},{sq:"2 & 3"},{sq:"2 & 4"},{sq:"2 & 5"},{sq:"2 & 6"},{sq:"2 & 7"},{sq:"2 & 8"},{sq:"2 & 9"},{sq:"3 & 0"},{sq:"3 & 1"},{sq:"3 & 2"},{sq:"3 & 3"},{sq:"3 & 4"},{sq:"3 & 5"},{sq:"3 & 6"},{sq:"3 & 7"},{sq:"3 & 8"},{sq:"3 & 9"},{sq:"4 & 0"},{sq:"4 & 1"},{sq:"4 & 2"},{sq:"4 & 3"},{sq:"4 & 4"},{sq:"4 & 5"},{sq:"4 & 6"},{sq:"4 & 7"},{sq:"4 & 8"},{sq:"4 & 9"},{sq:"5 & 0"},{sq:"5 & 1"},{sq:"5 & 2"},{sq:"5 & 3"},{sq:"5 & 4"},{sq:"5 & 5"},{sq:"5 & 6"},{sq:"5 & 7"},{sq:"5 & 8"},{sq:"5 & 9"},{sq:"6 & 0"},{sq:"6 & 1"},{sq:"6 & 2"},{sq:"6 & 3"},{sq:"6 & 4"},{sq:"6 & 5"},{sq:"6 & 6"},{sq:"6 & 7"},{sq:"6 & 8"},{sq:"6 & 9"},{sq:"7 & 0"},{sq:"7 & 1"},{sq:"7 & 2"},{sq:"7 & 3"},{sq:"7 & 4"},{sq:"7 & 5"},{sq:"7 & 6"},{sq:"7 & 7"},{sq:"7 & 8"},{sq:"7 & 9"},{sq:"8 & 0"},{sq:"8 & 1"},{sq:"8 & 2"},{sq:"8 & 3"},{sq:"8 & 4"},{sq:"8 & 5"},{sq:"8 & 6"},{sq:"8 & 7"},{sq:"8 & 8"},{sq:"8 & 9"},{sq:"9 & 0"},{sq:"9 & 1"},{sq:"9 & 2"},{sq:"9 & 3"},{sq:"9 & 4"},{sq:"9 & 5"},{sq:"9 & 6"},{sq:"9 & 7"},{sq:"9 & 8"},{sq:"9 & 9"}],a.openModal=function(){console.log("Modal function on click");var c=b.open({templateUrl:"views/modal.html",controller:"ModalController"});c.result.then(function(b){a.selected=b})}}]),angular.module("gridpoolsApp").controller("ModalController",["$scope","$modalInstance",function(a,b){a.close=function(){b.close()}}]),angular.module("gridpoolsApp").controller("LoginController",["$scope","$modalInstance","Login","$state","Profile",function(a,b,c,d,e){a.user={},a.login=function(f){c.login(f).then(function(){b.close(),e.getData(),d.go("dashboard")},function(b){a.errorMsg=b})},a.forgotPw=function(b){c.forgotPw(b).then(function(b){a.success=b},function(b){a.error=b})}}]),angular.module("gridpoolsApp").controller("DashboardController",["$scope","Login",function(a,b){a.login=b}]),angular.module("gridpoolsApp").controller("ProfileController",["$scope","Profile","$firebase","$base64",function(a,b){a.sweet=b,a.profile={name:b.getProfileSettings().name,email:b.getProfileSettings().email,image:b.getProfileSettings().photo}}]),$scope.$watch("myFiles",function(){for(var a=0;a<$scope.myFiles.length;a++){var b=$scope.myFiles[a];$scope.upload=$upload.upload({url:"server/upload/url",data:{myObj:$scope.myModelObj},file:b}).progress(function(a){console.log("progress: "+parseInt(100*a.loaded/a.total)+"% file :"+a.config.file.name)}).success(function(a,b,c,d){console.log("file "+d.file.name+"is uploaded successfully. Response: "+a)})}}),angular.module("gridpoolsApp").factory("Create",["$firebase","$q",function(a,b){var c=new Firebase("https://scorching-torch-8007.firebaseio.com/");return{createUser:function(a){var d=b.defer();return c.createUser({email:a.email,password:a.password},function(a){null===a?d.resolve("User created successfully"):d.reject("Error creating user:",a)}),d.promise},createGrid:function(a){c.set({grid:a.gridName})}}}]),angular.module("gridpoolsApp").factory("Login",["$firebase","$q","$cookies","$state",function(a,b,c,d){var e=new Firebase("https://scorching-torch-8007.firebaseio.com/");return{login:function(a){var d=b.defer();return e.authWithPassword({email:a.email,password:a.password},function(a){a?d.reject("Login failed!",a):(c.gridpools="welcome back",d.resolve("Authenticated successfully with payload:"))}),d.promise},logout:function(){delete c.gridpools,d.go("home")},forgotPw:function(a){var c=b.defer();return e.resetPassword({email:a.email},function(a){null===a?c.resolve("Password reset email sent successfully"):c.reject("Sorry, we have no account with that email address")}),c.promise}}}]),angular.module("gridpoolsApp").factory("Profile",["$firebase","$cookies","$q","$timeout","$base64",function(a,b,c,d){var e=!1,f={};return{requestUser:function(){var a=c.defer(),f=b.gridpools;return d(function(){f?f?(e=!0,a.resolve()):a.reject():(e=!1,a.reject())},500),a.promise},getData:function(){var a=c.defer(),b=new Firebase("https://scorching-torch-8007.firebaseio.com/users");return b.on("value",function(b){f=b.val().ID000001,a.resolve()},function(){a.reject()}),a.promise},getProfileSettings:function(){return f},photoChange:function(a){var b=c.defer();return console.log(a),b.promise}}}]);